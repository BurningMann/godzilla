<script setup>
import Button from '../elements/Button.vue'

import { ref, onMounted } from 'vue'
import { storeToRefs } from 'pinia'
import { useMainStore } from '../../stores/main'
import { ElMessage } from 'element-plus'

const store = useMainStore()
const { currentStep, appData } = storeToRefs(store)

const emit = defineEmits(['close'])

const props = defineProps({
  timer: Object,
})

const email = ref('')
const editEmail = ref(false)

function saveEmail() {
  const mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/

  if (!email.value || !email.value.match(mailformat)) {
    ElMessage({
      message: 'Fill in the email field',
      type: 'error',
      grouping: true,
    })
    return false
  }
  appData.value.email = email.value
  editEmail.value = false
}

const emailInput = ref(null)
function startEdit() {
  editEmail.value = true
  /* emailInput.value.focus() */
}

const form = ref({
  cardName: '',
  cardNumber: '',
  cardDate: '',
  cardCvv: '',
})

onMounted(() => {
  email.value = appData.value.email
})
</script>
<template>
  <div class="pay-dialog container">
    <div class="pay-dialog__close" @click="emit('close')">
      <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          opacity="0.5"
          d="M2.59036 2.59C2.67152 2.50872 2.76791 2.44425 2.87401 2.40025C2.98011 2.35626 3.09384 2.33362 3.2087 2.33362C3.32356 2.33362 3.43729 2.35626 3.54339 2.40025C3.64949 2.44425 3.74587 2.50872 3.82703 2.59L7.00036 5.76217L10.1737 2.59C10.2549 2.5088 10.3513 2.44439 10.4574 2.40044C10.5635 2.35649 10.6772 2.33388 10.792 2.33388C10.9069 2.33388 11.0206 2.35649 11.1267 2.40044C11.2328 2.44439 11.3292 2.5088 11.4104 2.59C11.4916 2.6712 11.556 2.7676 11.5999 2.87369C11.6439 2.97979 11.6665 3.0935 11.6665 3.20833C11.6665 3.32317 11.6439 3.43688 11.5999 3.54297C11.556 3.64907 11.4916 3.74546 11.4104 3.82667L8.2382 7L11.4104 10.1733C11.5744 10.3373 11.6665 10.5597 11.6665 10.7917C11.6665 11.0236 11.5744 11.246 11.4104 11.41C11.2464 11.574 11.024 11.6661 10.792 11.6661C10.5601 11.6661 10.3377 11.574 10.1737 11.41L7.00036 8.23783L3.82703 11.41C3.66304 11.574 3.44062 11.6661 3.2087 11.6661C2.97678 11.6661 2.75436 11.574 2.59036 11.41C2.42637 11.246 2.33424 11.0236 2.33424 10.7917C2.33424 10.5597 2.42637 10.3373 2.59036 10.1733L5.76253 7L2.59036 3.82667C2.50909 3.74551 2.44461 3.64912 2.40062 3.54302C2.35663 3.43692 2.33398 3.32319 2.33398 3.20833C2.33398 3.09347 2.35663 2.97974 2.40062 2.87364C2.44461 2.76754 2.50909 2.67116 2.59036 2.59Z"
          fill="#1C100C"
        />
      </svg>
    </div>
    <div class="pay-dialog__logo">
      <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M19.4718 0.108117C19.3526 0.259696 19.205 0.664081 19.205 0.838849C19.205 1.08694 19.6976 1.9937 20.1787 2.63133C20.7423 3.37813 20.9872 4.28228 20.9374 5.43225C20.908 6.10856 20.8252 6.59182 20.6203 7.28036C20.4951 7.70126 20.4598 7.91362 20.4181 8.49487C20.3564 9.35483 20.4115 9.71545 20.7169 10.4543C20.8262 10.7185 20.9927 11.1508 21.0871 11.4151C21.1815 11.6793 21.2699 11.9249 21.2836 11.9609C21.3179 12.0512 21.3763 11.8937 21.4616 11.4806C21.51 11.2461 21.5321 10.8428 21.5393 10.0613C21.548 9.11918 21.5618 8.92127 21.6401 8.61759C21.8621 7.75667 22.0517 7.45317 22.891 6.61505C23.6543 5.85275 23.7272 5.73562 23.6645 5.37412C23.6408 5.23796 23.6288 5.11891 23.6377 5.10957C23.687 5.05799 23.7619 5.39635 23.7767 5.73794C23.7959 6.18045 23.8099 6.14267 23.2745 7.09171C22.9112 7.73576 22.8203 8.08555 22.8209 8.83851C22.8212 9.24805 22.8525 9.58785 22.9333 10.0581C23.0079 10.4919 23.0461 10.8792 23.0473 11.2154L23.0492 11.7207L23.2359 11.2622C23.6332 10.2865 24.1213 9.47588 24.7173 8.80196C24.8625 8.63776 25.2763 8.27421 25.6367 7.99407C26.6946 7.17189 27.3565 6.47011 27.6821 5.82545C27.8747 5.44417 27.9535 5.18988 28.1325 4.37303C28.2304 3.92602 28.3399 3.5484 28.4143 3.40159C28.6182 2.99912 29.0554 2.62565 29.4607 2.50775C29.5318 2.48705 29.5015 2.52111 29.3734 2.60574C29.2654 2.6771 29.101 2.81488 29.0081 2.91191C28.8468 3.08057 28.8375 3.10633 28.7968 3.49609C28.7668 3.78396 28.7703 4.11555 28.8089 4.62435C28.8824 5.59518 28.8686 5.97948 28.7425 6.47683C28.4988 7.43836 27.8753 8.40801 26.9002 9.34186C26.4795 9.74476 26.2369 10.0606 25.8668 10.6872C25.5778 11.1767 25.4856 11.5 25.3361 12.5473C25.2747 12.9778 25.2059 13.4102 25.1834 13.508C25.1217 13.7753 25.1273 13.7807 25.2986 13.618C25.6017 13.3299 25.9761 12.8192 26.1736 12.4241C26.6269 11.5176 27.1862 10.8286 27.7933 10.4287C28.1758 10.1767 28.4249 10.0793 29.0515 9.93695C29.3125 9.87765 29.6979 9.7665 29.9079 9.68999C30.3114 9.54296 30.381 9.48125 30.5242 9.14421L30.5985 8.96952L30.5793 9.15438C30.5537 9.40142 30.408 9.692 30.2078 9.89503C30.1176 9.98647 29.7997 10.1988 29.5013 10.367C28.8479 10.7351 28.3609 11.1852 28.0666 11.6927C27.8735 12.0256 27.5682 12.7221 27.432 13.14C27.3298 13.4537 27.1346 13.8415 26.9186 14.1602L26.745 14.4162L27.2191 14.0543C27.8098 13.6033 28.1598 13.3762 28.6202 13.1452C29.4073 12.7503 29.956 12.5817 30.8354 12.4649C31.628 12.3596 32.2279 12.2338 32.7194 12.07C33.5933 11.7786 33.9642 11.5285 34.6976 10.7358C34.9736 10.4374 35.2635 10.1304 35.3417 10.0534C35.6649 9.73559 36.3877 9.5068 36.8009 9.59152L36.9888 9.63004L36.7097 9.66296C36.2492 9.71724 36.1281 9.78773 35.8811 10.1453C35.6749 10.4437 35.3183 11.1095 35.0266 11.7404C34.6711 12.5098 33.831 13.2769 32.8446 13.7329C32.4255 13.9267 31.5959 14.2002 31.1852 14.28C30.828 14.3494 29.8066 14.8316 29.3963 15.1246C29.1251 15.3183 28.8065 15.6599 28.4573 16.1314C28.3506 16.2755 28.1084 16.5778 27.9191 16.8031L27.5751 17.2127L27.7393 17.1819C28.0969 17.1148 28.7769 16.8084 29.2427 16.5045C29.8036 16.1384 30.2135 15.9406 30.7524 15.776C31.0913 15.6724 31.2159 15.6571 31.73 15.6558C32.2657 15.6544 32.3508 15.6654 32.6683 15.7768C33.0895 15.9247 33.8752 16.1086 34.0878 16.1092C34.2566 16.1096 34.3702 16.0464 34.6277 15.8083L34.7978 15.6511L34.6642 15.8499C34.5908 15.9593 34.4553 16.1009 34.3632 16.1645C34.0123 16.407 33.9081 16.4288 32.952 16.46C32.1206 16.4871 32.0341 16.4978 31.73 16.6104C31.2006 16.8063 30.6041 17.1844 30.0062 17.7028C29.6402 18.0202 29.3577 18.2159 29.0024 18.398C28.6532 18.5771 28.6642 18.5802 29.3112 18.4849C29.5787 18.4456 30.0849 18.4136 30.4644 18.4122C31.554 18.4079 32.1699 18.5277 33.2138 18.9466C34.3999 19.4226 35.0238 19.5919 35.745 19.6337C36.2971 19.6656 36.6507 19.6041 37.5233 19.3244C37.9254 19.1954 38.3529 19.0765 38.4733 19.06C38.9197 18.999 39.597 19.2253 39.8768 19.529L40 19.6626L39.8764 19.5692C39.7112 19.4444 39.3106 19.2975 39.1352 19.2975C38.8873 19.2975 37.9811 19.7904 37.3439 20.2719C36.5976 20.8359 35.6941 21.0809 34.5449 21.031C33.869 21.0017 33.386 20.9188 32.698 20.7138C32.2773 20.5885 32.0651 20.5532 31.4843 20.5114C30.6249 20.4497 30.2645 20.5048 29.5261 20.8105C29.2621 20.9198 28.83 21.0865 28.566 21.1809C28.302 21.2753 28.0565 21.3638 28.0205 21.3775C27.9303 21.4118 28.0877 21.4702 28.5005 21.5556C28.7349 21.604 29.1378 21.6261 29.9189 21.6333C30.8604 21.6421 31.0581 21.6559 31.3616 21.7343C32.222 21.9564 32.5253 22.1461 33.3628 22.9859C34.1246 23.7498 34.2417 23.8228 34.6029 23.76C34.739 23.7363 34.858 23.7243 34.8673 23.7332C34.9189 23.7825 34.5807 23.8574 34.2394 23.8722C33.7971 23.8914 33.8349 23.9054 32.8865 23.3697C32.2429 23.0061 31.8933 22.9152 31.1408 22.9158C30.7316 22.9161 30.392 22.9475 29.922 23.0283C29.4886 23.103 29.1015 23.1411 28.7655 23.1424L28.2605 23.1443L28.7188 23.3311C29.6938 23.7287 30.5039 24.2171 31.1774 24.8135C31.3415 24.9588 31.7048 25.3728 31.9847 25.7335C32.8064 26.7921 33.5077 27.4544 34.1519 27.7802C34.5336 27.9733 34.7879 28.0522 35.6034 28.2302C36.4227 28.4091 36.7113 28.5343 37.0226 28.8457C37.215 29.0382 37.4077 29.3472 37.4681 29.56C37.4886 29.6322 37.4553 29.6027 37.3695 29.4726C37.2982 29.3646 37.1605 29.2001 37.0635 29.1072C36.895 28.9457 36.8692 28.9364 36.4797 28.8957C36.192 28.8656 35.8607 28.8692 35.3522 28.9078C34.382 28.9814 33.998 28.9676 33.501 28.8414C32.5401 28.5975 31.5711 27.9735 30.6378 26.9978C30.2352 26.5768 29.9196 26.3341 29.2934 25.9638C28.8042 25.6746 28.4811 25.5822 27.4345 25.4327C27.0043 25.3712 26.5722 25.3025 26.4744 25.2799C26.2073 25.2181 26.2019 25.2238 26.3645 25.3951C26.6524 25.6985 27.1628 26.0731 27.5576 26.2708C28.4635 26.7244 29.152 27.284 29.5517 27.8915C29.8036 28.2742 29.9009 28.5236 30.0431 29.1505C30.1024 29.4118 30.2135 29.7974 30.2899 30.0076C30.4369 30.4112 30.4985 30.481 30.8354 30.6243L31.0099 30.6985L30.8252 30.6794C30.5783 30.6538 30.2879 30.5079 30.085 30.3076C29.9936 30.2174 29.7814 29.8993 29.6134 29.6007C29.2455 28.9469 28.7957 28.4595 28.2885 28.165C27.9559 27.9718 27.2599 27.6662 26.8422 27.53C26.5295 27.428 26.1413 27.2325 25.8253 27.0179L25.5721 26.8461L25.9837 27.3918C26.4752 28.0433 26.6431 28.3138 26.9277 28.9121C27.2933 29.6808 27.4103 30.1125 27.5644 31.2608C27.7239 32.449 28.0063 33.3057 28.4587 33.9729C28.6114 34.1984 28.7586 34.3494 29.7056 35.2523C29.9003 35.438 30.1124 35.6869 30.1769 35.8054C30.3348 36.0958 30.4319 36.5767 30.3912 36.8665L30.3593 37.0931L30.3255 36.8311C30.26 36.3231 30.194 36.2194 29.75 35.9266C29.5309 35.7821 29.0472 35.5165 28.6751 35.3365C27.8933 34.9583 27.5878 34.7528 27.1862 34.3352C26.5291 33.6518 26.0628 32.7172 25.7496 31.456C25.5939 30.8289 25.3301 30.22 24.9724 29.6621C24.7202 29.2686 24.4647 29.0115 23.9182 28.601C23.5976 28.3601 23.286 28.1059 22.8759 27.7505L22.7719 27.6603L22.8036 27.835C22.8681 28.1913 23.1545 28.8377 23.4493 29.2922C24.0395 30.2024 24.3007 30.9095 24.3382 31.6998C24.3614 32.187 24.3698 32.1407 24.0515 33.2938C23.8907 33.8768 23.8432 34.2671 23.9165 34.4042C23.9454 34.4582 24.0411 34.5829 24.1291 34.6812L24.2892 34.8601L24.1435 34.7756C23.9402 34.6577 23.7046 34.3206 23.6075 34.0084C23.5421 33.7979 23.5253 33.6061 23.5248 33.0606C23.5241 32.3212 23.4746 32.0145 23.2877 31.5916C23.1294 31.2334 22.6815 30.5734 22.2215 30.0208C21.9933 29.7465 21.7405 29.3835 21.6286 29.1692C21.5213 28.9638 21.4329 28.8267 21.4321 28.8646C21.4313 28.9024 21.4622 29.1481 21.5008 29.4105C21.5401 29.6782 21.5721 30.1846 21.5735 30.5644C21.5778 31.6773 21.4609 32.2617 21.0114 33.3741C20.4266 34.8215 20.245 35.763 20.3846 36.6238C20.409 36.774 20.5346 37.2358 20.6637 37.65C20.7929 38.0643 20.9109 38.4754 20.926 38.5637C20.9911 38.9453 20.7578 39.704 20.5011 39.9453C20.402 40.0385 20.4032 40.0305 20.5275 39.7797C20.5993 39.6348 20.667 39.4219 20.6781 39.3066C20.6955 39.1252 20.6733 39.0473 20.5132 38.7283C20.2993 38.302 19.9594 37.7564 19.7122 37.4424C19.4744 37.1404 19.1826 36.5084 19.0658 36.0424C18.9839 35.716 18.9677 35.5302 18.9664 34.9096C18.9648 34.069 19.0318 33.613 19.2764 32.8C19.3866 32.4337 19.4372 32.1575 19.4722 31.7301C19.5536 30.7381 19.4859 30.3208 19.0942 29.4016C18.9906 29.1584 18.8449 28.785 18.7706 28.5719C18.6963 28.3587 18.6248 28.1549 18.6118 28.1189C18.5734 28.0126 18.5238 28.1374 18.4382 28.5561C18.3801 28.8404 18.361 29.1709 18.3562 29.9748C18.3494 31.1112 18.3044 31.4447 18.0821 32.0033C17.8751 32.5238 17.6956 32.7667 17.0097 33.4543C16.6427 33.8224 16.3082 34.1968 16.2664 34.2864C16.2113 34.4046 16.197 34.5124 16.2141 34.6794L16.2377 34.9096L16.1674 34.7567C16.1144 34.6417 16.1014 34.5113 16.1148 34.2293L16.1326 33.8546L16.4952 33.2136C16.6946 32.861 16.8948 32.4532 16.9403 32.3071C17.1294 31.6992 17.1281 30.9732 16.936 29.8657C16.8844 29.5678 16.8483 29.1592 16.8474 28.8613L16.8459 28.3591L16.636 28.8613C16.347 29.5525 16.1094 30.0119 15.8189 30.4406C15.3337 31.1567 14.968 31.5355 14.1468 32.1726C12.8917 33.1464 12.2541 33.9286 11.9654 34.8487C11.9173 35.0023 11.8154 35.4227 11.7391 35.783C11.6627 36.1432 11.5517 36.5347 11.4923 36.6527C11.2907 37.0538 10.8062 37.4733 10.4331 37.57C10.3377 37.5947 10.3409 37.5885 10.4579 37.5203C10.6993 37.3799 10.9507 37.1505 11.0157 37.0113C11.1148 36.7991 11.1455 36.1143 11.0864 35.4336C10.9868 34.2862 11.0456 33.7426 11.3486 33.0099C11.6537 32.2722 12.1001 31.6479 12.8942 30.8482C13.6801 30.0569 14.2071 29.2531 14.3803 28.5817C14.4168 28.4399 14.4875 28.0272 14.5372 27.6646C14.5869 27.302 14.6572 26.8607 14.6933 26.6841C14.7294 26.5074 14.7484 26.3524 14.7355 26.3394C14.6517 26.2556 13.9722 27.1442 13.6753 27.7258C13.3497 28.3638 13.1189 28.7028 12.7337 29.1085C12.2065 29.6639 11.6553 29.9766 10.9713 30.1083C10.7993 30.1414 10.4368 30.2402 10.1658 30.3279C9.61985 30.5045 9.48334 30.6071 9.37061 30.9258C9.30886 31.1003 9.30515 31.1032 9.30192 30.9793C9.29664 30.7772 9.52432 30.345 9.73916 30.1493C9.84482 30.0531 10.1563 29.8467 10.4313 29.6907C11.4435 29.1167 11.8907 28.5245 12.4324 27.0405C12.64 26.4719 12.7365 26.2727 12.9786 25.9135C13.0757 25.7694 13.127 25.6742 13.0925 25.702C12.4007 26.2592 11.7791 26.6743 11.2405 26.939C10.3364 27.3833 9.9506 27.4943 8.7311 27.6609C7.54606 27.8228 6.67154 28.1128 6.02534 28.5583C5.73194 28.7606 5.57802 28.9077 4.92973 29.6055C4.59666 29.964 4.34682 30.1922 4.19988 30.2723C3.90237 30.4343 3.42385 30.5323 3.13141 30.4911L2.905 30.4592L3.16684 30.4254C3.67448 30.3598 3.77808 30.2938 4.07074 29.8495C4.21515 29.6302 4.48053 29.1462 4.66038 28.7739C5.03835 27.9916 5.24369 27.6859 5.66107 27.2841C6.34401 26.6264 7.27793 26.1598 8.53838 25.8464C9.16498 25.6906 9.77355 25.4266 10.3311 25.0688C10.7243 24.8164 10.9812 24.5608 11.3915 24.0139C11.6321 23.693 11.8863 23.3812 12.2414 22.9709L12.3315 22.8668L12.1569 22.8985C11.8009 22.963 11.1549 23.2497 10.7008 23.5446C9.7911 24.1353 9.08446 24.3966 8.29468 24.4342C7.80782 24.4574 7.85408 24.4657 6.70178 24.1473C6.11917 23.9863 5.72911 23.9388 5.59212 24.0122C5.53809 24.0411 5.41354 24.1368 5.31526 24.2249L5.13655 24.3851L5.2209 24.2393C5.33874 24.0358 5.6756 23.8002 5.98764 23.703C6.19794 23.6375 6.3897 23.6207 6.93478 23.6202C7.67376 23.6195 7.98016 23.57 8.40278 23.383C8.76077 23.2245 9.42032 22.7763 9.9726 22.3161C10.2467 22.0876 10.6095 21.8347 10.8236 21.7227C11.0289 21.6154 11.1659 21.5269 11.128 21.5261C11.0902 21.5253 10.8447 21.5563 10.5825 21.5949C10.315 21.6342 9.8089 21.6662 9.42935 21.6676C8.3172 21.6719 7.7332 21.5549 6.62148 21.1051C5.17504 20.5199 4.23418 20.3382 3.37397 20.4779C3.22384 20.5023 2.76234 20.628 2.3484 20.7572C1.93446 20.8865 1.52358 21.0046 1.43538 21.0196C1.05396 21.0848 0.295823 20.8514 0.0547051 20.5945C-0.0384252 20.4953 -0.0305262 20.4966 0.220192 20.6209C0.36495 20.6927 0.577701 20.7605 0.692914 20.7716C0.874199 20.7891 0.952055 20.7668 1.2709 20.6066C1.69688 20.3926 2.24213 20.0525 2.55587 19.8051C2.85769 19.5671 3.48927 19.2751 3.955 19.1582C4.28118 19.0763 4.46683 19.06 5.08706 19.0588C5.92702 19.0571 6.38281 19.1242 7.19523 19.369C7.56129 19.4793 7.83728 19.5299 8.26444 19.5649C9.25575 19.6463 9.67283 19.5786 10.5914 19.1866C10.8344 19.083 11.2076 18.9372 11.4206 18.8629C11.6335 18.7885 11.8373 18.717 11.8733 18.7039C11.9795 18.6655 11.8547 18.6159 11.4363 18.5303C11.1522 18.4721 10.8219 18.453 10.0185 18.4482C8.88288 18.4414 8.54964 18.3963 7.99138 18.1739C7.47122 17.9667 7.22853 17.7871 6.54131 17.1008C6.17355 16.7335 5.79937 16.3988 5.70986 16.357C5.59172 16.3019 5.48397 16.2875 5.31709 16.3047L5.08706 16.3283L5.2398 16.2579C5.3548 16.2049 5.48506 16.1919 5.7669 16.2053L6.1413 16.2231L6.78186 16.5859C7.13422 16.7854 7.54183 16.9858 7.68777 17.0313C8.29495 17.2204 9.05456 17.2194 10.1058 17.028C10.4025 16.974 10.7859 16.9397 11.1095 16.9381L11.6332 16.9355L11.175 16.7487C10.1999 16.3511 9.38986 15.8627 8.71639 15.2663C8.5523 15.121 8.18898 14.707 7.90903 14.3463C7.08739 13.2877 6.38608 12.6254 5.74185 12.2995C5.36016 12.1065 5.10582 12.0276 4.29039 11.8496C3.47107 11.6707 3.18242 11.5455 2.87118 11.2341C2.67881 11.0416 2.48609 10.7326 2.42564 10.5198C2.40513 10.4476 2.43847 10.4771 2.52427 10.6072C2.59558 10.7152 2.73327 10.8797 2.83024 10.9726C2.99878 11.1341 3.02453 11.1434 3.41403 11.1841C3.70171 11.2142 4.03308 11.2106 4.54154 11.172C5.51173 11.0984 5.89577 11.1122 6.3928 11.2384C7.35369 11.4823 8.3227 12.1063 9.25592 13.082C9.65856 13.503 9.97417 13.7457 10.6004 14.116C11.0896 14.4052 11.4126 14.4976 12.4592 14.6471C12.8895 14.7086 13.3215 14.7773 13.4193 14.7999C13.6865 14.8617 13.6919 14.856 13.5293 14.6847C13.2413 14.3813 12.7309 14.0067 12.3361 13.809C11.4303 13.3554 10.7417 12.7958 10.342 12.1883C10.0902 11.8055 9.99289 11.5562 9.85062 10.9293C9.79136 10.668 9.68029 10.2824 9.60383 10.0722C9.45689 9.66855 9.39523 9.59881 9.0584 9.45553L8.88384 9.38125L9.06857 9.40042C9.31545 9.42601 9.60584 9.57187 9.80873 9.77218C9.90011 9.8624 10.1123 10.1805 10.2804 10.4791C10.6483 11.1329 11.098 11.6203 11.6052 11.9148C11.9379 12.108 12.6339 12.4136 13.0516 12.5498C13.365 12.6521 13.7526 12.8474 14.0711 13.0636L14.3269 13.2372L13.9652 12.7628C13.5146 12.1718 13.2876 11.8215 13.0568 11.3608C12.6621 10.5732 12.4937 10.0241 12.3769 9.14421C12.2717 8.35098 12.146 7.75069 11.9822 7.25892C11.6911 6.38438 11.4411 6.01332 10.6489 5.2794C10.3508 5.00319 10.0439 4.71313 9.96701 4.63483C9.64939 4.3115 9.42076 3.58814 9.50542 3.17472L9.54391 2.98672L9.57682 3.26599C9.63106 3.7268 9.7015 3.84798 10.0588 4.09515C10.357 4.30145 11.0224 4.65832 11.6529 4.95013C12.4217 5.30595 13.1883 6.1466 13.6441 7.13363C13.8377 7.553 14.111 8.38317 14.1908 8.7941C14.2601 9.15154 14.7421 10.1736 15.0348 10.5842C15.2284 10.8556 15.5698 11.1744 16.041 11.5239C16.185 11.6307 16.487 11.873 16.7122 12.0624L17.1216 12.4067L17.0908 12.2423C17.0237 11.8845 16.7175 11.204 16.4138 10.7379C16.048 10.1766 15.8503 9.76646 15.6858 9.22718C15.5823 8.88808 15.567 8.76336 15.5657 8.24897C15.5643 7.71292 15.5753 7.62772 15.6866 7.31006C15.8344 6.8886 16.0182 6.10232 16.0188 5.8896C16.0192 5.72069 15.956 5.60706 15.7181 5.34936L15.5609 5.17913L15.7597 5.31281C15.869 5.3863 16.0104 5.5219 16.074 5.61404C16.3164 5.9652 16.3382 6.06939 16.3693 7.0262C16.3965 7.85808 16.4071 7.94463 16.5196 8.24897C16.7155 8.77869 17.0933 9.37561 17.6114 9.97394C17.9285 10.3402 18.1241 10.6228 18.3061 10.9783C18.485 11.3278 18.4881 11.3168 18.3929 10.6693C18.3536 10.4016 18.3217 9.8952 18.3202 9.5154C18.316 8.42509 18.4357 7.80877 18.8543 6.76418C19.33 5.57727 19.4992 4.95301 19.5409 4.23132C19.5728 3.67933 19.5115 3.3256 19.2323 2.45185C19.1038 2.04947 18.9853 1.62945 18.969 1.5184C18.9061 1.08869 19.1068 0.430839 19.3905 0.137245C19.5552 -0.0332871 19.5938 -0.0470869 19.4718 0.108117ZM19.0968 14.0156C16.5553 14.4137 14.5832 16.2566 14.0053 18.7735C13.9504 19.0124 13.9116 19.3858 13.8962 19.8215C13.8565 20.9471 14.0263 21.745 14.5141 22.7256C14.8555 23.4118 15.2225 23.9115 15.767 24.4316C16.6828 25.3066 17.8006 25.8576 19.0522 26.051C19.5821 26.1329 20.6766 26.1071 21.1578 26.0013C23.5696 25.4712 25.379 23.6493 25.9097 21.2167C25.9716 20.9324 25.9901 20.6625 25.9901 20.0399C25.9901 18.9216 25.8543 18.3227 25.3793 17.3462C24.5871 15.7173 23.0523 14.5194 21.2125 14.0939C20.7837 13.9947 19.527 13.9482 19.0968 14.0156ZM21.1688 14.4001C22.3073 14.663 23.19 15.1516 24.011 15.9731C24.8492 16.8119 25.3479 17.7301 25.6039 18.9062C25.6649 19.1865 25.6843 19.4603 25.6843 20.0399C25.6843 20.6195 25.6649 20.8933 25.6039 21.1736C25.3479 22.3497 24.8492 23.2679 24.011 24.1067C23.1727 24.9455 22.2551 25.4445 21.0798 25.7006C20.5585 25.8143 19.3344 25.814 18.8122 25.7003C16.5194 25.2008 14.7894 23.4697 14.2902 21.1753C14.1766 20.6528 14.1763 19.4279 14.2899 18.9062C14.8191 16.4745 16.6905 14.7056 19.1404 14.3212C19.5618 14.2551 20.7393 14.3009 21.1688 14.4001ZM18.19 15.953C16.3348 16.7164 15.1395 18.7076 15.3598 20.6672C15.427 21.2648 15.5424 21.6698 15.7968 22.2016C17.3457 25.4394 21.7878 25.7455 23.7924 22.7526C23.9112 22.5752 24.002 22.4237 23.9942 22.4159C23.9863 22.408 23.8685 22.4307 23.7323 22.4663C23.1195 22.6265 22.1912 22.6235 21.523 22.4593C20.1604 22.1242 18.9653 21.1104 18.4186 19.8257C18.22 19.3591 18.1324 19.0375 18.0665 18.5333C17.9673 17.7741 18.1053 16.8178 18.4115 16.1419C18.4931 15.9619 18.5247 15.848 18.4931 15.8486C18.4646 15.8492 18.3282 15.8962 18.19 15.953Z"
          fill="url(#paint0_linear_2111_2225)"
        />
        <defs>
          <linearGradient id="paint0_linear_2111_2225" x1="0" y1="20" x2="40" y2="20" gradientUnits="userSpaceOnUse">
            <stop stop-color="#642B72" />
            <stop offset="1" stop-color="#C5426E" />
          </linearGradient>
        </defs>
      </svg>
    </div>
    <div class="pay-dialog__personal">
      Personal offer reserved
      <div class="pay-dialog__timer">
        <div class="pay-dialog__timer-item">{{ timer.min[0] }}</div>
        <div class="pay-dialog__timer-item">{{ timer.min[1] }}</div>
        <div>:</div>
        <div class="pay-dialog__timer-item">{{ timer.sec[0] }}</div>
        <div class="pay-dialog__timer-item">{{ timer.sec[1] }}</div>
      </div>
    </div>
    <div>
      <div class="pay-dialog__table">
        <div class="pay-dialog__row">
          <div><strong>Start your 7-day trial</strong></div>
        </div>
        <div class="pay-dialog__row">
          <div>Total today:</div>
          <div class="pay-dialog__row-price"><span class="old-price">$7.99</span><strong>$1</strong></div>
        </div>
        <div class="pay-dialog__row">
          <div class="pay-dialog__small-title">Email</div>
          <div class="pay-dialog__email">
            <input ref="emailInput" v-model="email" type="text" :readonly="!editEmail" />

            <div class="edit-email-btn">
              <div v-if="!editEmail" @click="startEdit">
                <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g opacity="0.5" clip-path="url(#clip0_2111_2152)">
                    <path
                      d="M5.2961 13.1238L1.89383 9.72153L10.1228 1.49257L13.525 4.89479L5.2961 13.1238ZM1.57578 10.3208L4.69679 13.4419L0.0175781 15.0001L1.57578 10.3208ZM14.5715 3.85292L13.9814 4.44301L10.5746 1.03626L11.1647 0.446128C11.7592 -0.148709 12.7231 -0.148709 13.3176 0.446128L14.5715 1.70002C15.1616 2.29642 15.1616 3.25665 14.5715 3.85292Z"
                      fill="black"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_2111_2152">
                      <rect width="15" height="15" fill="white" />
                    </clipPath>
                  </defs>
                </svg>
              </div>
              <div v-else class="save-btn" @click="saveEmail">Save</div>
            </div>
          </div>
        </div>
      </div>

      <div class="payments-buttons">
        <Button :black="true">
          <template #custom-icon>
            <div>
              <svg width="62" height="26" viewBox="0 0 62 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M11.3263 3.35225C10.5977 4.22896 9.437 4.92368 8.27823 4.82192C8.12515 3.63992 8.7026 2.37378 9.36918 1.58904C10.0958 0.694717 11.367 0.0528376 12.3979 0C12.5199 1.23483 12.0413 2.44814 11.3263 3.35225ZM12.3862 5.05479C10.7023 4.95108 9.25679 6.03131 8.45844 6.03131C7.64265 6.03131 6.41994 5.10567 5.08872 5.13699C3.3622 5.15851 1.74807 6.1546 0.870271 7.75734C-0.957013 10.9452 0.395526 15.6654 2.15111 18.2642C3.00953 19.5479 4.03653 20.955 5.39101 20.9158C6.67185 20.863 7.18729 20.0607 8.73166 20.0607C10.2954 20.0607 10.7392 20.9159 12.1033 20.8845C13.5043 20.863 14.3918 19.6008 15.2502 18.317C16.2288 16.8591 16.6318 15.4305 16.6531 15.3601C16.6318 15.3288 13.9384 14.2798 13.919 11.1194C13.8977 8.46771 16.0369 7.20548 16.128 7.13307C14.9266 5.29941 13.0296 5.10568 12.3843 5.05675L12.3862 5.05479ZM22.1059 1.46575V20.7515H25.0416V14.1585H29.1011C32.8041 14.1585 35.4085 11.5597 35.4085 7.80822C35.4085 4.04892 32.8565 1.46771 29.2019 1.46771L22.1059 1.46575ZM25.0416 3.99413H28.4229C30.9652 3.99413 32.4205 5.37965 32.4205 7.81605C32.4205 10.2524 30.9652 11.6497 28.4035 11.6497H25.0416V3.99413ZM40.7547 20.8943C42.6013 20.8943 44.3065 19.9472 45.0855 18.4364H45.1475V20.7515H47.8603V11.1487C47.8603 8.37769 45.6823 6.57534 42.3204 6.57534C39.2122 6.57534 36.9102 8.39922 36.8308 10.8963H39.4641C39.687 9.7045 40.7566 8.92955 42.2409 8.92955C44.0372 8.92955 45.0371 9.78474 45.0371 11.3562V12.4149L41.3844 12.6399C37.9721 12.8532 36.1351 14.2701 36.1351 16.7476C36.1351 19.2446 38.0341 20.8963 40.7566 20.8963L40.7547 20.8943ZM41.553 18.6106C39.9873 18.6106 38.9894 17.8454 38.9894 16.6751C38.9894 15.4618 39.9486 14.7476 41.7739 14.6341L45.0351 14.4305V15.5205C45.0351 17.3268 43.5314 18.6106 41.5414 18.6106H41.553ZM51.4839 26C54.3382 26 55.683 24.8787 56.8534 21.5049L62 6.76712H59.0236L55.5725 18.1507H55.5105L52.0594 6.76712H48.992L53.9584 20.8023L53.6949 21.6575C53.2395 23.0959 52.5148 23.6536 51.2223 23.6536C50.9898 23.6536 50.546 23.6243 50.3639 23.6047V25.9198C50.5344 25.9687 51.263 25.9902 51.4742 25.9902L51.4839 26Z"
                  fill="white"
                />
              </svg>
            </div>
          </template>
        </Button>
      </div>

      <div class="or-line">
        <div class="or-line__label">or</div>
      </div>

      <div class="pay-form">
        <div class="pay-form__title">Credit / Debit Card</div>
        <div class="pay-form__systems">
          <img src="/images/payments-2.png" alt="" />
        </div>
        <div>
          <form action="#" class="pay-form__from">
            <input v-model="form.cardName" type="text" class="input" placeholder="Name on Card" />
            <input v-model="form.cardNumber" type="text" class="input" placeholder="Card number" />
            <div class="input-container">
              <input v-model="form.cardDate" type="text" class="input" placeholder="MM/YY" />
              <input v-model="form.cardCvv" type="text" class="input" placeholder="CVV" />
            </div>
          </form>
          <Button :text="'Start 7-Day Trial'" @click="currentStep++" />
        </div>

        <div class="footer-text">
          Your plan will be available immediately after registration. No hidden payments.
          <strong>Today you will be charged €1 for 7-days trial</strong> , then €39.99 after trial for your 30-Day plan.
          All refunds are proceeded according to our money-back policy. To cancel your plan, simply let us know:
          support@natal-chart.online
        </div>
      </div>
    </div>
  </div>
</template>

<style scoped lang="scss">
.pay-dialog {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  overflow: auto;
  background: var(--c-white);
  padding: 2rem var(--container-padding) 0;
  color: var(--c-black);

  &__close {
    position: absolute;
    right: 2rem;
    top: 2rem;
    width: 2.6rem;
    height: 2.6rem;
    background: rgba(236, 236, 236, 0.5);
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  &__logo {
    display: flex;
    justify-content: center;
    margin-bottom: 2rem;
  }

  &__personal {
    background: #f5eaf7;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem var(--container-padding);
    border-radius: 0.5rem;
    margin-bottom: 2.8rem;
  }

  &__timer {
    display: flex;
    gap: 0.3rem;
    font-weight: 700;
    font-size: 2.1rem;

    &-item {
      background: rgba(144, 54, 113, 0.09);
      width: 2rem;
      height: 3rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 0.4rem;
    }
  }

  &__email {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    width: 100%;

    input {
      border: none;
      background: none;
      text-align: right;
      width: 100%;
    }
  }

  &__table {
    margin-bottom: 3rem;
  }

  &__row {
    padding-bottom: 1rem;
    margin-bottom: 1rem;
    border-bottom: 1px solid rgba(119, 51, 149, 0.2);
    color: var(--c-black);
    display: flex;
    justify-content: space-between;
    font-size: 1.6rem;
    gap: 2rem;

    &-price {
      display: flex;
      gap: 0.6rem;
      align-items: center;
      flex-shrink: 0;
    }

    &:last-of-type {
      margin-bottom: 0;
    }
  }
}

.save-btn {
  cursor: pointer;
  padding: 0.3rem 0.6rem;
  background: linear-gradient(90deg, #642b72 0%, #c5426e 100%);
  color: #fff;
  border-radius: 0.4rem;
  font-weight: 600;
}

.payments-buttons {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 2rem;
}

.or-line {
  width: 100%;
  position: relative;
  margin-top: 4rem;
  margin-bottom: 3rem;

  &__label {
    color: rgba(45, 45, 45, 0.6);
    padding: 0.3rem 1.2rem;
    background: var(--c-white);
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }

  &::before {
    content: '';
    display: block;
    border: 1px solid rgba(119, 51, 149, 0.2);
  }
}

.pay-form {
  background: #fff;
  padding: 3rem var(--container-padding) 2rem;
  margin: 0 -2rem;

  &__title {
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 0.8rem;
  }

  &__systems {
    margin-bottom: 3rem;
  }

  &__from {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 2.5rem;
  }
}

.footer-text {
  font-size: 1.1rem;
  line-height: 140%;
  text-align: center;
  color: var(--c-black);
  opacity: 0.7;
  margin: 2.5rem 0;
}

.input-container {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
}
</style>
