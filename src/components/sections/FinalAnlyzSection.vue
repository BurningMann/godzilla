<script setup>
import LoadingCircle from '../elements/LoadingCircle.vue'
import Button from '../elements/Button.vue'
import { ref, onMounted } from 'vue'
import { storeToRefs } from 'pinia'
import { useMainStore } from '../../stores/main'
const store = useMainStore()
const { currentStep, appData } = storeToRefs(store)

const stepsText = [
  'Analyzing your profile ...',
  'Creating your astrological blueprint ...',
  'Cross-cheking with similar health profiles ...',
]

const reviewsData = {
  Female: [
    {
      name: 'Sabrina',
      text: `“It’s scary how accurate this reading is. I can’t believe it. I never write reviews but I really needed to with this one. I love it, it helped me so much to understand myself and my partner.”`,
      stars: 5,
    },
  ],
  Male: [
    {
      name: 'Daniel A.',
      text: `I’ve always been curious about astrology, but never thought I can find smth real on until I found this. It’s a real game-changer! The readings are comprehensive and helpful in planning my future.`,
      stars: 5,
    },
  ],
}

const progressData = ref([
  {
    name: 'Analyzing your goals',
    percent: 0,
    steps: 2,
    stepTime: 3000,
  },
  {
    name: 'Personality traits',
    percent: 0,
    steps: 3,
    stepTime: 3000,
  },
  {
    name: 'Relationship pattern',
    percent: 0,
    steps: 4,
    stepTime: 3000,
  },
])

const currentProgressStep = ref(0)
const showQuestion = ref(false)
const pause = ref(false)

function fillProgress() {
  let interval = null
  let step = 0
  const sectionPercent = 100 / progressData.value[currentProgressStep.value].steps

  interval = setInterval(() => {
    if (!pause.value) {
      step++
      progressData.value[currentProgressStep.value].percent = sectionPercent * step
      if (
        currentProgressStep.value === 1 &&
        step === 1 &&
        progressData.value[currentProgressStep.value].percent >= 30
      ) {
        pause.value = true
        showQuestion.value = true
      }

      if (step >= progressData.value[currentProgressStep.value].steps) {
        clearInterval(interval)
        if (currentProgressStep.value <= progressData.value.length - 2) {
          currentProgressStep.value++
          fillProgress()
        } else {
          setTimeout(() => {
            currentStep.value++
          }, 2000)
        }
      }
    }
  }, progressData.value[currentProgressStep.value].stepTime / progressData.value[currentProgressStep.value].steps)
}

onMounted(() => {
  fillProgress()
})
</script>

<template>
  <div class="analyz-page">
    <div class="analyz-page__top">
      <div class="analyz-page__top-icon">
        <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M31.1548 0.172987C30.9642 0.415513 30.728 1.06253 30.728 1.34216C30.728 1.7391 31.5161 3.18993 32.286 4.21013C33.1877 5.40502 33.5795 6.85165 33.4998 8.69159C33.4529 9.7737 33.3203 10.5469 32.9926 11.6486C32.7922 12.322 32.7357 12.6618 32.669 13.5918C32.5703 14.9677 32.6584 15.5447 33.1471 16.7269C33.3219 17.1496 33.5884 17.8414 33.7393 18.2641C33.8904 18.6868 34.0318 19.0798 34.0538 19.1375C34.1087 19.2819 34.202 19.03 34.3385 18.3689C34.416 17.9937 34.4513 17.3485 34.4628 16.098C34.4768 14.5907 34.4988 14.274 34.6242 13.7881C34.9794 12.4107 35.2827 11.9251 36.6255 10.5841C37.8469 9.36439 37.9636 9.177 37.8632 8.59859C37.8253 8.38073 37.8061 8.19026 37.8203 8.17531C37.8992 8.09279 38.019 8.63416 38.0426 9.1807C38.0734 9.88871 38.0958 9.82827 37.2392 11.3467C36.6579 12.3772 36.5125 12.9369 36.5134 14.1416C36.5139 14.7969 36.564 15.3406 36.6933 16.093C36.8127 16.787 36.8737 17.4067 36.8757 17.9446L36.8788 18.7532L37.1775 18.0195C37.8131 16.4584 38.5941 15.1614 39.5477 14.0831C39.7801 13.8204 40.442 13.2387 41.0187 12.7905C42.7113 11.475 43.7704 10.3522 44.2914 9.32072C44.5995 8.71067 44.7257 8.3038 45.012 6.99684C45.1686 6.28163 45.3439 5.67745 45.4629 5.44254C45.7891 4.79859 46.4886 4.20105 47.137 4.01239C47.2509 3.97927 47.2024 4.03377 46.9974 4.16919C46.8246 4.28336 46.5616 4.5038 46.413 4.65906C46.1549 4.92891 46.1399 4.97013 46.0749 5.59374C46.0268 6.05434 46.0325 6.58488 46.0942 7.39896C46.2119 8.95229 46.1898 9.56716 45.9881 10.3629C45.5981 11.9014 44.6004 13.4528 43.0403 14.947C42.3672 15.5916 41.9791 16.0969 41.387 17.0995C40.9245 17.8827 40.7769 18.4 40.5378 20.0757C40.4395 20.7645 40.3295 21.4563 40.2934 21.6128C40.1947 22.0405 40.2038 22.0492 40.4777 21.7889C40.9628 21.3278 41.5617 20.5107 41.8778 19.8785C42.6031 18.4282 43.4979 17.3258 44.4692 16.6859C45.0812 16.2826 45.4799 16.1269 46.4824 15.8991C46.9001 15.8042 47.5167 15.6264 47.8527 15.504C48.4982 15.2687 48.6097 15.17 48.8388 14.6307L48.9576 14.3512L48.9269 14.647C48.886 15.0423 48.6528 15.5072 48.3325 15.832C48.1882 15.9784 47.6795 16.3181 47.2021 16.5871C46.1567 17.1762 45.3774 17.8963 44.9065 18.7083C44.5976 19.241 44.109 20.3553 43.8912 21.024C43.7277 21.5259 43.4154 22.1465 43.0697 22.6564L42.7921 23.066L43.5506 22.4869C44.4957 21.7653 45.0557 21.402 45.7923 21.0323C47.0517 20.4004 47.9296 20.1308 49.3366 19.9439C50.6049 19.7753 51.5647 19.5741 52.351 19.312C53.7494 18.8458 54.3427 18.4456 55.5162 17.1772C55.9578 16.6999 56.4216 16.2086 56.5468 16.0855C57.0638 15.5769 58.2204 15.2109 58.8814 15.3464L59.182 15.4081L58.7355 15.4607C57.9987 15.5476 57.8049 15.6604 57.4097 16.2324C57.0798 16.7098 56.5092 17.7753 56.0426 18.7846C55.4737 20.0156 54.1296 21.243 52.5513 21.9727C51.8808 22.2827 50.5534 22.7203 49.8964 22.848C49.3248 22.959 47.6906 23.7306 47.0341 24.1993C46.6001 24.5093 46.0904 25.0558 45.5316 25.8103C45.3609 26.0409 44.9734 26.5244 44.6706 26.885L44.1201 27.5404L44.3829 27.4911C44.955 27.3837 46.043 26.8934 46.7883 26.4071C47.6858 25.8215 48.3416 25.505 49.2039 25.2416C49.7461 25.0758 49.9455 25.0513 50.768 25.0493C51.6251 25.0471 51.7613 25.0647 52.2692 25.2429C52.9431 25.4795 54.2004 25.7738 54.5405 25.7747C54.8106 25.7754 54.9923 25.6742 55.4043 25.2933L55.6765 25.0417L55.4627 25.3599C55.3452 25.5348 55.1284 25.7614 54.9811 25.8632C54.4196 26.2512 54.253 26.2861 52.7231 26.336C51.393 26.3794 51.2546 26.3964 50.768 26.5766C49.921 26.8902 48.9666 27.495 48.0099 28.3246C47.4243 28.8323 46.9723 29.1454 46.4039 29.4369C45.8452 29.7233 45.8627 29.7283 46.898 29.5759C47.326 29.5129 48.1358 29.4618 48.743 29.4595C50.4864 29.4527 51.4718 29.6443 53.1421 30.3145C55.0399 31.0761 56.038 31.3471 57.192 31.4139C58.0753 31.465 58.6411 31.3666 60.0372 30.919C60.6806 30.7126 61.3646 30.5224 61.5573 30.496C62.2715 30.3984 63.3552 30.7604 63.8029 31.2463L64 31.4602L63.8022 31.3107C63.5379 31.111 62.897 30.876 62.6163 30.876C62.2197 30.876 60.7698 31.6647 59.7503 32.4351C58.5562 33.3374 57.1105 33.7295 55.2718 33.6497C54.1904 33.6027 53.4177 33.47 52.3167 33.1421C51.6437 32.9416 51.3042 32.885 50.3748 32.8183C48.9998 32.7196 48.4232 32.8077 47.2418 33.2967C46.8193 33.4716 46.1281 33.7383 45.7056 33.8894C45.2832 34.0405 44.8904 34.1821 44.8328 34.204C44.6885 34.2589 44.9403 34.3524 45.6009 34.489C45.9758 34.5664 46.6205 34.6018 47.8702 34.6133C49.3766 34.6273 49.693 34.6494 50.1786 34.7748C51.5551 35.1302 52.0404 35.4338 53.3805 36.7775C54.5994 37.9996 54.7867 38.1164 55.3647 38.016C55.5824 37.9781 55.7728 37.9588 55.7877 37.9731C55.8702 38.052 55.3292 38.1719 54.783 38.1955C54.0754 38.2263 54.1358 38.2487 52.6184 37.3915C51.5886 36.8098 51.0293 36.6644 49.8253 36.6653C49.1705 36.6658 48.6272 36.7159 47.8752 36.8453C47.1817 36.9647 46.5625 37.0258 46.0249 37.0278L45.2168 37.0309L45.95 37.3298C47.5101 37.9659 48.8062 38.7473 49.8838 39.7016C50.1463 39.9341 50.7276 40.5965 51.1756 41.1736C52.4902 42.8673 53.6123 43.9271 54.643 44.4484C55.2537 44.7573 55.6607 44.8835 56.9654 45.1683C58.2763 45.4545 58.7381 45.6548 59.2361 46.1531C59.5439 46.4611 59.8523 46.9555 59.949 47.296C59.9818 47.4115 59.9285 47.3643 59.7912 47.1562C59.6771 46.9833 59.4568 46.7202 59.3016 46.5715C59.032 46.3131 58.9908 46.2982 58.3676 46.2331C57.9073 46.185 57.3771 46.1907 56.5635 46.2524C55.0112 46.3702 54.3968 46.3481 53.6015 46.1462C52.0641 45.756 50.5137 44.7577 49.0205 43.1965C48.3763 42.5229 47.8713 42.1346 46.8694 41.5421C46.0867 41.0793 45.5698 40.9316 43.8952 40.6924C43.2068 40.594 42.5156 40.4839 42.3591 40.4478C41.9317 40.349 41.923 40.3581 42.1832 40.6322C42.6439 41.1176 43.4605 41.717 44.0922 42.0333C45.5416 42.759 46.6432 43.6544 47.2828 44.6264C47.6857 45.2388 47.8414 45.6377 48.069 46.6409C48.1638 47.0588 48.3415 47.6759 48.4639 48.0121C48.699 48.658 48.7976 48.7696 49.3366 48.9988L49.6159 49.1177L49.3203 49.087C48.9253 49.0461 48.4607 48.8127 48.136 48.4922C47.9898 48.3478 47.6503 47.8388 47.3814 47.3611C46.7928 46.315 46.0732 45.5352 45.2617 45.064C44.7294 44.7549 43.6158 44.266 42.9475 44.048C42.4473 43.8847 41.8261 43.572 41.3204 43.2287L40.9153 42.9538L41.5739 43.8269C42.3603 44.8692 42.629 45.302 43.0844 46.2594C43.6694 47.4893 43.8566 48.18 44.1031 50.0172C44.3583 51.9184 44.8101 53.289 45.5338 54.3567C45.7783 54.7174 46.0138 54.959 47.529 56.4037C47.8405 56.7008 48.1798 57.099 48.283 57.2887C48.5357 57.7533 48.6911 58.5228 48.6259 58.9864L48.5749 59.3489L48.5209 58.9297C48.416 58.1169 48.3104 57.9511 47.6 57.4825C47.2494 57.2513 46.4754 56.8264 45.8802 56.5385C44.6293 55.9333 44.1405 55.6045 43.498 54.9363C42.4465 53.8429 41.7004 52.3476 41.1993 50.3295C40.9502 49.3263 40.5281 48.352 39.9559 47.4593C39.5523 46.8297 39.1436 46.4184 38.2692 45.7616C37.7561 45.3762 37.2575 44.9694 36.6015 44.4007L36.4351 44.2565L36.4857 44.536C36.5889 45.106 37.0472 46.1403 37.5188 46.8674C38.4633 48.3239 38.881 49.4552 38.9412 50.7197C38.9783 51.4992 38.9916 51.4251 38.4825 53.27C38.2251 54.2028 38.1491 54.8274 38.2664 55.0467C38.3127 55.1332 38.4657 55.3326 38.6066 55.49L38.8627 55.7761L38.6297 55.641C38.3043 55.4524 37.9274 54.913 37.7721 54.4134C37.6673 54.0767 37.6405 53.7697 37.6397 52.897C37.6386 51.7139 37.5594 51.2233 37.2604 50.5466C37.0071 49.9735 36.2904 48.9175 35.5545 48.0333C35.1892 47.5944 34.7848 47.0136 34.6057 46.6708C34.4341 46.3421 34.2926 46.1227 34.2914 46.1833C34.2901 46.2439 34.3396 46.6369 34.4013 47.0567C34.4642 47.485 34.5153 48.2954 34.5176 48.903C34.5245 50.6837 34.3375 51.6187 33.6183 53.3986C32.6825 55.7145 32.392 57.2208 32.6154 58.5981C32.6543 58.8384 32.8554 59.5773 33.062 60.2401C33.2687 60.9028 33.4575 61.5607 33.4815 61.7019C33.5857 62.3125 33.2125 63.5264 32.8018 63.9124C32.6432 64.0615 32.6452 64.0489 32.844 63.6475C32.9588 63.4157 33.0673 63.0751 33.085 62.8906C33.1129 62.6004 33.0773 62.4757 32.8211 61.9652C32.4789 61.2832 31.9351 60.4102 31.5396 59.9079C31.1591 59.4247 30.6921 58.4135 30.5052 57.6678C30.3743 57.1456 30.3483 56.8483 30.3463 55.8553C30.3436 54.5105 30.4508 53.7807 30.8423 52.48C31.0186 51.8939 31.0995 51.452 31.1556 50.7681C31.2857 49.181 31.1774 48.5132 30.5507 47.0425C30.3849 46.6534 30.1519 46.056 30.033 45.715C29.9141 45.374 29.7997 45.0478 29.7789 44.9902C29.7174 44.8201 29.6381 45.0199 29.5012 45.6898C29.4082 46.1447 29.3776 46.6734 29.3699 47.9598C29.3591 49.778 29.287 50.3115 28.9314 51.2053C28.6001 52.0381 28.3129 52.4267 27.2156 53.527C26.6283 54.1158 26.0931 54.7149 26.0263 54.8582C25.9381 55.0473 25.9151 55.2198 25.9426 55.487L25.9804 55.8553L25.8678 55.6108C25.7831 55.4266 25.7623 55.2181 25.7837 54.7668L25.8122 54.1674L26.3923 53.1418C26.7113 52.5777 27.0317 51.9251 27.1044 51.6914C27.407 50.7187 27.405 49.5572 27.0976 47.7851C27.015 47.3084 26.9573 46.6547 26.9558 46.178L26.9534 45.3745L26.6175 46.178C26.1553 47.284 25.775 48.0191 25.3102 48.7049C24.5339 49.8508 23.9488 50.4568 22.6349 51.4761C20.6267 53.0342 19.6065 54.2858 19.1447 55.758C19.0676 56.0037 18.9046 56.6763 18.7825 57.2528C18.6604 57.8292 18.4827 58.4555 18.3877 58.6444C18.065 59.2861 17.29 59.9573 16.693 60.112C16.5404 60.1515 16.5454 60.1416 16.7326 60.0326C17.1188 59.8078 17.5212 59.4407 17.6251 59.2181C17.7837 58.8786 17.8329 57.7828 17.7383 56.6938C17.5788 54.8579 17.6729 53.9882 18.1578 52.8159C18.6459 51.6355 19.3601 50.6366 20.6307 49.3572C21.8881 48.091 22.7314 46.8049 23.0084 45.7307C23.0669 45.5039 23.1799 44.8436 23.2595 44.2634C23.3391 43.6832 23.4515 42.9772 23.5093 42.6945C23.5671 42.4119 23.5975 42.1638 23.5768 42.1431C23.4428 42.009 22.3556 43.4307 21.8805 44.3613C21.3595 45.3821 20.9902 45.9244 20.3739 46.5736C19.5304 47.4622 18.6484 47.9626 17.5541 48.1733C17.2788 48.2263 16.6988 48.3844 16.2652 48.5247C15.3918 48.8072 15.1733 48.9714 14.993 49.4813C14.8942 49.7605 14.8882 49.7651 14.8831 49.5668C14.8746 49.2435 15.2389 48.5519 15.5827 48.2388C15.7517 48.0849 16.2501 47.7548 16.6901 47.5052C18.3096 46.5868 19.0251 45.6392 19.8919 43.2648C20.224 42.3551 20.3784 42.0363 20.7658 41.4616C20.9211 41.2311 21.0032 41.0787 20.9479 41.1233C19.8411 42.0147 18.8466 42.6789 17.9847 43.1025C16.5383 43.8133 15.921 43.9909 13.9698 44.2574C12.0737 44.5165 10.6745 44.9805 9.64055 45.6933C9.17111 46.017 8.92483 46.2523 7.88757 47.3688C7.35466 47.9424 6.9549 48.3076 6.7198 48.4357C6.2438 48.6949 5.47816 48.8517 5.01025 48.7858L4.648 48.7348L5.06695 48.6807C5.87917 48.5757 6.04493 48.4701 6.51319 47.7592C6.74424 47.4084 7.16885 46.6339 7.4566 46.0383C8.06137 44.7866 8.3899 44.2975 9.05771 43.6545C10.1504 42.6023 11.6447 41.8557 13.6614 41.3543C14.664 41.105 15.6377 40.6826 16.5297 40.11C17.1589 39.7062 17.57 39.2972 18.2263 38.4222C18.6114 37.9089 19.018 37.4099 19.5863 36.7534L19.7304 36.5869L19.4511 36.6376C18.8814 36.7409 17.8479 37.1994 17.1212 37.6714C15.6658 38.6165 14.5351 39.0345 13.2715 39.0947C12.4925 39.1318 12.5665 39.1452 10.7228 38.6357C9.79067 38.3781 9.16657 38.3021 8.94739 38.4195C8.86094 38.4657 8.66166 38.6189 8.50441 38.7599L8.21847 39.0161L8.35345 38.783C8.54198 38.4574 9.08096 38.0802 9.58022 37.9248C9.91671 37.82 10.2235 37.7931 11.0956 37.7923C12.278 37.7912 12.7683 37.712 13.4445 37.4128C14.0172 37.1593 15.0725 36.4421 15.9562 35.7057C16.3947 35.3402 16.9751 34.9356 17.3178 34.7564C17.6462 34.5846 17.8654 34.4431 17.8049 34.4418C17.7443 34.4405 17.3516 34.49 16.932 34.5518C16.504 34.6147 15.6942 34.6659 15.087 34.6682C13.3075 34.6751 12.3731 34.4879 10.5944 33.7682C8.28006 32.8319 6.77468 32.5411 5.39835 32.7647C5.15814 32.8036 4.41974 33.0048 3.75744 33.2116C3.09514 33.4184 2.43773 33.6073 2.29661 33.6314C1.68633 33.7357 0.473316 33.3622 0.0875281 32.9512C-0.0614803 32.7925 -0.0488418 32.7945 0.352308 32.9935C0.58392 33.1084 0.924321 33.2169 1.10866 33.2346C1.39872 33.2625 1.52329 33.2269 2.03344 32.9706C2.71501 32.6281 3.58741 32.084 4.08939 31.6881C4.57231 31.3074 5.58283 30.8402 6.32801 30.6531C6.84989 30.5221 7.14693 30.496 8.13929 30.4941C9.48323 30.4914 10.2125 30.5987 11.5124 30.9904C12.0981 31.1668 12.5396 31.2478 13.2231 31.3039C14.8092 31.4341 15.4765 31.3257 16.9462 30.6986C17.3351 30.5327 17.9321 30.2996 18.2729 30.1806C18.6137 30.0616 18.9396 29.9471 18.9972 29.9263C19.1672 29.8648 18.9675 29.7854 18.2981 29.6484C17.8435 29.5554 17.3151 29.5248 16.0296 29.5171C14.2126 29.5062 13.6794 29.4341 12.7862 29.0783C11.9539 28.7467 11.5656 28.4593 10.4661 27.3613C9.87768 26.7736 9.27899 26.2381 9.13578 26.1712C8.94676 26.083 8.77436 26.06 8.50734 26.0875L8.13929 26.1253L8.38368 26.0126C8.56767 25.9279 8.7761 25.907 9.22704 25.9285L9.82607 25.957L10.851 26.5374C11.4148 26.8567 12.0669 27.1773 12.3004 27.2501C13.2719 27.5526 14.4873 27.551 16.1693 27.2448C16.644 27.1585 17.2574 27.1035 17.7753 27.1009L18.6132 27.0968L17.88 26.7978C16.3199 26.1618 15.0238 25.3804 13.9462 24.4261C13.6837 24.1936 13.1024 23.5312 12.6544 22.9541C11.3398 21.2603 10.2177 20.2006 9.18696 19.6793C8.57626 19.3704 8.16932 19.2442 6.86462 18.9594C5.55371 18.6732 5.09188 18.4729 4.59388 17.9745C4.28609 17.6665 3.97774 17.1722 3.88103 16.8317C3.84821 16.7161 3.90156 16.7634 4.03884 16.9714C4.15293 17.1444 4.37323 17.4075 4.52839 17.5562C4.79805 17.8145 4.83925 17.8295 5.46245 17.8946C5.92274 17.9427 6.45293 17.937 7.26647 17.8752C8.81877 17.7575 9.43323 17.7796 10.2285 17.9814C11.7659 18.3717 13.3163 19.37 14.8095 20.9312C15.4537 21.6047 15.9587 21.9931 16.9606 22.5856C17.7433 23.0484 18.2602 23.1961 19.9348 23.4353C20.6232 23.5337 21.3145 23.6438 21.4709 23.6799C21.8983 23.7787 21.907 23.7696 21.6468 23.4955C21.1861 23.0101 20.3695 22.4107 19.7378 22.0944C18.2884 21.3686 17.1868 20.4733 16.5472 19.5013C16.1443 18.8889 15.9886 18.49 15.761 17.4868C15.6662 17.0688 15.4885 16.4518 15.3661 16.1156C15.131 15.4697 15.0324 15.3581 14.4934 15.1288L14.2141 15.01L14.5097 15.0407C14.9047 15.0816 15.3693 15.315 15.694 15.6355C15.8402 15.7798 16.1797 16.2889 16.4486 16.7666C17.0372 17.8127 17.7568 18.5925 18.5683 19.0637C19.1006 19.3728 20.2142 19.8617 20.8825 20.0797C21.384 20.2433 22.0042 20.5558 22.5138 20.9018L22.9231 21.1796L22.3444 20.4205C21.6233 19.4748 21.2602 18.9145 20.8908 18.1773C20.2593 16.9172 19.9899 16.0386 19.8031 14.6307C19.6347 13.3616 19.4336 12.4011 19.1716 11.6143C18.7057 10.215 18.3058 9.62131 17.0383 8.44704C16.5612 8.0051 16.0703 7.54101 15.9472 7.41573C15.439 6.89839 15.0732 5.74103 15.2087 5.07955L15.2703 4.77875L15.3229 5.22558C15.4097 5.96287 15.5224 6.15677 16.0941 6.55225C16.5712 6.88232 17.6359 7.45332 18.6446 7.9202C19.8748 8.48952 21.1013 9.83456 21.8305 11.4138C22.1404 12.0848 22.5777 13.4131 22.7052 14.0706C22.8162 14.6425 23.5873 16.2778 24.0557 16.9347C24.3654 17.369 24.9116 17.8791 25.6656 18.4382C25.896 18.609 26.3793 18.9968 26.7396 19.2998L27.3945 19.8507L27.3452 19.5877C27.2379 19.0152 26.748 17.9265 26.262 17.1807C25.6768 16.2826 25.3605 15.6263 25.0973 14.7635C24.9316 14.2209 24.9071 14.0214 24.9051 13.1983C24.9029 12.3407 24.9205 12.2043 25.0986 11.6961C25.335 11.0218 25.6291 9.76371 25.63 9.42336C25.6307 9.1531 25.5296 8.97129 25.1489 8.55898L24.8975 8.28661L25.2155 8.50049C25.3903 8.61809 25.6167 8.83504 25.7184 8.98247C26.1063 9.54431 26.1411 9.71103 26.191 11.2419C26.2343 12.5729 26.2514 12.7114 26.4314 13.1983C26.7447 14.0459 27.3492 15.001 28.1782 15.9583C28.6856 16.5442 28.9985 16.9965 29.2898 17.5654C29.576 18.1244 29.581 18.1069 29.4287 17.0709C29.3658 16.6426 29.3147 15.8323 29.3124 15.2246C29.3056 13.4801 29.4971 12.494 30.1668 10.8227C30.9279 8.92364 31.1987 7.92482 31.2655 6.77011C31.3165 5.88692 31.2184 5.32096 30.7717 3.92296C30.566 3.27915 30.3765 2.60712 30.3504 2.42944C30.2497 1.7419 30.5709 0.689342 31.0247 0.219591C31.2883 -0.0532594 31.35 -0.075339 31.1548 0.172987ZM30.5549 22.4249C26.4886 23.0619 23.3331 26.0105 22.4085 30.0375C22.3207 30.4199 22.2585 31.0173 22.2339 31.7145C22.1704 33.5154 22.442 34.7919 23.2226 36.361C23.7688 37.4589 24.3559 38.2584 25.2272 39.0906C26.6925 40.4906 28.481 41.3721 30.4836 41.6817C31.3313 41.8127 33.0826 41.7713 33.8525 41.6021C37.7114 40.7539 40.6064 37.8388 41.4555 33.9467C41.5546 33.4919 41.5841 33.0599 41.5841 32.0638C41.5841 30.2746 41.3669 29.3164 40.6069 27.754C39.3393 25.1477 36.8837 23.231 33.94 22.5502C33.2538 22.3915 31.2432 22.3171 30.5549 22.4249ZM33.8701 23.0402C35.6916 23.4608 37.104 24.2426 38.4176 25.5569C39.7588 26.899 40.5567 28.3682 40.9662 30.25C41.0638 30.6983 41.0949 31.1364 41.0949 32.0638C41.0949 32.9912 41.0638 33.4294 40.9662 33.8777C40.5567 35.7594 39.7588 37.2286 38.4176 38.5708C37.0764 39.9128 35.6082 40.7112 33.7277 41.121C32.8936 41.3028 30.9351 41.3025 30.0995 41.1205C26.431 40.3213 23.663 37.5515 22.8644 33.8805C22.6825 33.0444 22.6821 31.0846 22.8638 30.25C23.7106 26.3593 26.7049 23.5289 30.6247 22.9139C31.2989 22.8081 33.1828 22.8814 33.8701 23.0402ZM29.104 25.5248C26.1357 26.7463 24.2232 29.9321 24.5757 33.0676C24.6833 34.0236 24.8678 34.6716 25.2748 35.5225C27.7532 40.7031 34.8605 41.1928 38.0679 36.4041C38.258 36.1203 38.4032 35.8779 38.3907 35.8654C38.3782 35.8529 38.1896 35.8892 37.9717 35.9461C36.9911 36.2024 35.5059 36.1976 34.4368 35.9348C32.2566 35.3988 30.3444 33.7767 29.4698 31.7211C29.1521 30.9745 29.0119 30.46 28.9064 29.6532C28.7476 28.4385 28.9684 26.9085 29.4585 25.827C29.589 25.539 29.6396 25.3567 29.5889 25.3578C29.5433 25.3587 29.3251 25.4339 29.104 25.5248Z"
            fill="url(#paint0_linear_2042_748)"
          />
          <defs>
            <linearGradient id="paint0_linear_2042_748" x1="0" y1="32" x2="64" y2="32" gradientUnits="userSpaceOnUse">
              <stop stop-color="#642B72" />
              <stop offset="1" stop-color="#C5426E" />
            </linearGradient>
          </defs>
        </svg>
      </div>
      <div class="analyz-page__steps">
        <div class="analyz-page__step">
          {{ stepsText[currentProgressStep] }}
        </div>
      </div>
    </div>
    <div class="progress-wrapper">
      <div
        v-for="(item, index) in progressData"
        :key="index"
        class="progress-box"
        :class="{ 'is-higlited': index <= currentProgressStep }"
      >
        <div class="progress-box__top">
          <div class="">{{ item.name }}</div>
          <div class="progress-box__precent">
            <LoadingCircle v-if="index === currentProgressStep && item.percent < 100" />
            <span v-if="item.percent < 100">{{ item.percent.toFixed() }}%</span>
            <span v-else
              ><svg width="18" height="14" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M7.08916 12.9342C7.01195 13.0118 6.92015 13.0734 6.81904 13.1155C6.71793 13.1575 6.6095 13.1792 6.49999 13.1792C6.39049 13.1792 6.28206 13.1575 6.18095 13.1155C6.07984 13.0734 5.98804 13.0118 5.91083 12.9342L1.20583 8.22833C0.971488 7.99392 0.839844 7.67603 0.839844 7.34458C0.839844 7.01312 0.971488 6.69524 1.20583 6.46083L1.79499 5.87166C2.0294 5.63732 2.34729 5.50568 2.67874 5.50568C3.0102 5.50568 3.32808 5.63732 3.56249 5.87166L6.49999 8.80916L14.4375 0.871659C14.6719 0.63732 14.9898 0.505676 15.3212 0.505676C15.6527 0.505676 15.9706 0.63732 16.205 0.871659L16.7942 1.46083C17.0285 1.69524 17.1601 2.01312 17.1601 2.34458C17.1601 2.67603 17.0285 2.99392 16.7942 3.22833L7.08916 12.9342Z"
                  fill="#C4426E"
                /></svg
            ></span>
          </div>
        </div>
        <div>
          <div class="progress">
            <div class="progress__line-container">
              <div
                class="progress__line"
                :style="{
                  width: `${item.percent}%`,
                }"
              ></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="footer-box">
      <div class="reviews-container__title">Trusted by over 141,562 clients</div>
      <div class="reviews-container">
        <div v-for="review in reviewsData[appData.gender]" class="review-card is-active">
          <div class="review-card__name">{{ review.name }}</div>
          <div class="review-card__stars">
            <svg width="91" height="18" viewBox="0 0 91 18" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M9.08009 0L11.2243 6.87571H18.1602L12.5495 11.1243L14.6937 18L9.08009 13.7486L3.46938 18L5.61356 11.1243L0 6.87571H6.93591L9.08009 0ZM27.2915 0L29.4328 6.87571H36.3716L30.758 11.1243L32.9022 18L27.2915 13.7486L21.6779 18L23.8221 11.1243L18.2085 6.87571H25.1473L27.2915 0ZM45.5 0L47.6442 6.87571H54.5801L48.9694 11.1243L51.1136 18L45.5 13.7486L39.8864 18L42.0306 11.1243L36.4199 6.87571H43.3558L45.5 0ZM63.7085 0L65.8527 6.87571H72.7915L67.1779 11.1243L69.3221 18L63.7085 13.7486L58.0978 18L60.242 11.1243L54.6284 6.87571H61.5672L63.7085 0ZM81.9199 0L84.0641 6.87571H91L85.3864 11.1243L87.5306 18L81.9199 13.7486L76.3063 18L78.4505 11.1243L72.8398 6.87571H79.7757L81.9199 0Z"
                fill="#C4426E"
              />
            </svg>
          </div>
          <div class="review-card__text" v-html="review.text" />
        </div>
      </div>
    </div>

    <div class="allert-bg" :class="{ 'is-active': showQuestion }">
      <div class="allert">
        <div class="allert__title">Do you enjoy spending time alone?</div>
        <div class="allert__buttons">
          <Button
            :text="'Yes'"
            :gray="true"
            @click="
              () => {
                appData.do_you_enjoy_spending_time_alone = 'Yes'
                showQuestion = false
                pause = false
              }
            "
          />
          <Button
            :text="'No'"
            @click="
              () => {
                appData.do_you_enjoy_spending_time_alone = 'No'
                showQuestion = false
                pause = false
              }
            "
          />
        </div>
      </div>
    </div>
  </div>
</template>

<style scoped lang="scss">
.analyz-page {
  background: linear-gradient(180deg, #1e0939 0%, #743072 100%);
  min-height: 100svh;
  padding-top: 7rem;
  padding-left: var(--container-padding);
  padding-right: var(--container-padding);
  padding-bottom: 30rem;

  &__top {
    margin-bottom: 2.5rem;
  }

  &__top-icon {
    display: flex;
    justify-content: center;
    margin-bottom: 2rem;
  }

  &__steps {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    height: 5.2rem;
  }

  &__step {
    font-weight: 700;
    font-size: 2rem;
    line-height: 130%;
    text-align: center;
    color: rgba(255, 255, 255, 1);
    overflow: hidden;
    transition: 0.3s;
  }
}

.progress-wrapper {
  display: flex;
  flex-direction: column;
  gap: 1.7rem;
}

.progress-box {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  opacity: 0.5;
  transition: 0.3s;

  &.is-higlited {
    opacity: 1;
  }

  &__top {
    display: flex;
    justify-content: space-between;
    font-size: 1.5rem;
  }

  &__precent {
    display: flex;
    gap: 0.6rem;
  }
}

.progress {
  width: 100%;
  position: relative;

  &__line-container {
    width: 100%;
    background: #4c2e61;
    border-radius: 30px;
    position: absolute;
    top: 50%;
    left: 0;
    transform: translate(0, -50%);
    overflow: hidden;
  }

  &__line {
    width: 100%;
    height: 0.6rem;
    background: linear-gradient(90deg, #642b72 0%, #c5426e 100%);
    border-radius: 30px;
    transition: 0.3s ease-in-out;
  }
}
</style>
